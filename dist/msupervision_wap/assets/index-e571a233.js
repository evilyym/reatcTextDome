import{c as ne,d as W,r as d,af as oe,Y as D,h as c,q as ie,t as A,j as ce,n as ue,ag as M,I as q,H as de,w as re,X as ve,ah as pe,ai as G,E as C,N as F,a3 as P,a4 as fe,a6 as me,a5 as _e,aj as he,D as _,F as g,G as K,J,K as X,L as Q,M as $,P as ge,a8 as ke,a9 as we}from"./index-6bedc73c.js";import{u as ye,T as Z,a as ee,C as be,E as Ce}from"./index-89a9bdcf.js";import{s as xe,F as Te,I as Ve,_ as De}from"./_plugin-vue_export-helper-524fd211.js";const[Se,h,Be]=ne("cascader"),Fe={title:String,options:ie(),closeable:A,swipeable:A,closeIcon:ce("cross"),showHeader:A,modelValue:ue,fieldNames:Object,placeholder:String,activeColor:String};var Pe=W({name:Se,props:Fe,emits:["close","change","finish","clickTab","update:modelValue"],setup(u,{slots:f,emit:w}){const o=d([]),m=d(0),[T,y]=ye(),{text:k,value:p,children:r}=oe({text:"text",value:"value",children:"children"},u.fieldNames),S=(e,t)=>{for(const n of e){if(n[p]===t)return[n];if(n[r]){const l=S(n[r],t);if(l)return[n,...l]}}},V=()=>{const{options:e,modelValue:t}=u;if(t!==void 0){const n=S(e,t);if(n){let l=e;o.value=n.map(a=>{const s={options:l,selected:a},v=l.find(x=>x[p]===a[p]);return v&&(l=v[r]),s}),l&&o.value.push({options:l,selected:null}),M(()=>{m.value=o.value.length-1});return}}o.value=[{options:e,selected:null}]},I=(e,t)=>{if(e.disabled)return;if(o.value[t].selected=e,o.value.length>t+1&&(o.value=o.value.slice(0,t+1)),e[r]){const a={options:e[r],selected:null};o.value[t+1]?o.value[t+1]=a:o.value.push(a),M(()=>{m.value++})}const n=o.value.map(a=>a.selected).filter(Boolean);w("update:modelValue",e[p]);const l={value:e[p],tabIndex:t,selectedOptions:n};w("change",l),e[r]||w("finish",l)},N=()=>w("close"),b=({name:e,title:t})=>w("clickTab",e,t),R=()=>u.showHeader?c("div",{class:h("header")},[c("h2",{class:h("title")},[f.title?f.title():u.title]),u.closeable?c(q,{name:u.closeIcon,class:[h("close-icon"),de],onClick:N},null):null]):null,H=(e,t,n)=>{const{disabled:l}=e,a=!!(t&&e[p]===t[p]),s=e.color||(a?u.activeColor:void 0),v=f.option?f.option({option:e,selected:a}):c("span",null,[e[k]]);return c("li",{ref:a?y(n):void 0,role:"menuitemradio",class:[h("option",{selected:a,disabled:l}),e.className],style:{color:s},tabindex:l?void 0:a?0:-1,"aria-checked":a,"aria-disabled":l||void 0,onClick:()=>I(e,n)},[v,a?c(q,{name:"success",class:h("selected-icon")},null):null])},O=(e,t,n)=>c("ul",{role:"menu",class:h("options")},[e.map(l=>H(l,t,n))]),U=(e,t)=>{const{options:n,selected:l}=e,a=u.placeholder||Be("select"),s=l?l[k]:a;return c(ee,{title:s,titleClass:h("tab",{unselected:!l})},{default:()=>{var v,x;return[(v=f["options-top"])==null?void 0:v.call(f,{tabIndex:t}),O(n,l,t),(x=f["options-bottom"])==null?void 0:x.call(f,{tabIndex:t})]}})},L=()=>c(Z,{active:m.value,"onUpdate:active":e=>m.value=e,shrink:!0,animated:!0,class:h("tabs"),color:u.activeColor,swipeable:u.swipeable,onClickTab:b},{default:()=>[o.value.map(U)]}),B=e=>{const t=e.parentElement;t&&(t.scrollTop=e.offsetTop-(t.offsetHeight-e.offsetHeight)/2)};return V(),D(m,e=>{const t=T.value[e];t&&B(t)}),D(()=>u.options,V,{deep:!0}),D(()=>u.modelValue,e=>{e!==void 0&&o.value.map(n=>{var l;return(l=n.selected)==null?void 0:l[p]}).includes(e)||V()}),()=>c("div",{class:h()},[R(),L()])}});const $e=re(Pe);const E=u=>(ke("data-v-3d65ee2d"),u=u(),we(),u),Ee={class:"applicationResults"},Ie=E(()=>g("div",{style:{}},null,-1)),Ne=E(()=>g("br",null,null,-1)),Re={class:"listBox listBoxBold"},He=["onClick"],Oe={style:{display:"block"}},Ue=E(()=>g("div",{class:"rightArrow"},null,-1)),Le=E(()=>g("hr",null,null,-1)),je={class:"certificationImagelist"},Ae={key:0,class:"bookBox"},Ke={key:0,class:"bookBox"},Ye=W({__name:"index",setup(u){const f=new Date(new Date().getFullYear()-5,0,1),w=new Date(new Date().getFullYear()+3,0,1),o=d(""),m=d(""),T=d(""),y=d(!1),k=d(!1),p=d([]),r=d([]),S={text:"name",value:"id"},V=({selectedOptions:a})=>{y.value=!1,m.value=a.map(s=>s.name).join("/")},I=a=>{N.push("/checkDetails?id="+a.id)},N=me(),b=_e("$active"),R=d(!1),H=d(!1),O=d(""),U=d([]),L=d(0),B=a=>`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`,e=a=>{const[s,v]=a;k.value=!1,o.value=`${B(s)} - ${B(v)}`},t=d([]);D(o,()=>{n(b.value,!1)});const n=async(a=0,s=!0)=>{t.value=(await he({status:O.value,start_time:o.value.split(" - ")[0],end_time:o.value.split(" - ")[1],page:1,page_size:999})).data,U.value=[1,2]},l=d({page:1,page_size:10});return D(m,()=>{l.value.page=1,G({certification_type_id:T.value,...l.value}).then(a=>{r.value=a.data.results})}),ve(async()=>{L.value=0,R.value=!1,H.value=!1,n(b.value,!1),pe(null).then(a=>{p.value=a.data}),G(l.value).then(a=>{r.value=a.data.results})}),(a,s)=>{const v=Te,x=be,Y=Ce,z=ee,te=$e,ae=ge,le=Ve,se=Z;return _(),C("div",Ee,[c(se,{active:P(b),"onUpdate:active":s[8]||(s[8]=i=>fe(b)?b.value=i:null),color:"#2488FF",style:{},background:"#fff","title-inactive-color":"#333","title-active-color":"#2488FF"},{default:F(()=>[c(z,{title:"检查情况通知"},{default:F(()=>[c(v,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=i=>o.value=i),"is-link":"",readonly:"",label:"",placeholder:"日期选择",onClick:s[1]||(s[1]=i=>k.value=!k.value)},null,8,["modelValue"]),Ie,c(x,{"first-day-of-week":"1","default-date":[new Date,new Date],"allow-same-day":!0,"min-date":P(f),"max-date":P(w),show:k.value,"onUpdate:show":s[2]||(s[2]=i=>k.value=i),type:"range",onConfirm:e},null,8,["default-date","min-date","max-date","show"]),Ne,g("div",Re,[(_(!0),C(K,null,J(t.value.results,i=>(_(),C("div",{class:"cirdBox",onClick:j=>I(i)},[g("h4",null,X(i.maintenance_type_name),1),g("p",Oe,[g("span",null,X(i.created_at),1)]),Ue,Le],8,He))),256)),t.value.count<1?(_(),Q(Y,{key:0,description:"暂无数据"})):$("",!0)])]),_:1}),c(z,{title:"资质证书查看"},{default:F(()=>[c(v,{modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=i=>m.value=i),"is-link":"",readonly:"",label:"",placeholder:"请选择证书类型",onClick:s[4]||(s[4]=i=>y.value=!0)},null,8,["modelValue"]),c(ae,{show:y.value,"onUpdate:show":s[7]||(s[7]=i=>y.value=i),round:"",position:"bottom"},{default:F(()=>[c(te,{modelValue:T.value,"onUpdate:modelValue":s[5]||(s[5]=i=>T.value=i),title:"请选择证书类型",options:p.value,"field-names":S,onClose:s[6]||(s[6]=i=>y.value=!1),onFinish:V},null,8,["modelValue","options"])]),_:1},8,["show"]),g("div",je,[(_(!0),C(K,null,J(r.value,(i,j)=>(_(),C(K,{key:j},[c(le,{onClick:ze=>P(xe)([i.url]),width:"100",height:"100","lazy-load":"",src:i.url},null,8,["onClick","src"]),(j+1)%3==0?(_(),C("div",Ae)):$("",!0)],64))),128)),r.value.length%3?(_(),C("div",Ke)):$("",!0)]),r.value.length<1?(_(),Q(Y,{key:0,description:"暂无数据"})):$("",!0)]),_:1})]),_:1},8,["active"])])}}});const Je=De(Ye,[["__scopeId","data-v-3d65ee2d"]]);export{Je as default};
