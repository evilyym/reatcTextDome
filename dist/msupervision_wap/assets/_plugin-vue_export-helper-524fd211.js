import{Q as Be,c as ie,af as ze,j as H,n as V,d as le,a_ as at,h as d,I as ne,aq as oe,aO as We,w as de,r as N,o as xe,ao as Ze,u as nt,b as z,e as Ce,Y as q,al as He,l as Ne,a$ as ot,X as Ie,aC as it,ak as lt,ax as rt,ay as qe,g as Le,t as Z,m as ae,aJ as ke,aB as Me,ag as te,am as G,p as Fe,s as ye,i as Q,b0 as st,aF as ct,aZ as ut,aX as dt,b1 as ft,aD as we,aK as vt,b2 as gt,aV as mt,aW as Ae,b3 as ht,A as Se,O as bt,b4 as yt,aw as je,y as wt,b5 as St,an as Te,as as xt,k as Ue,b6 as Ct,aM as It,P as Pt,q as kt,H as Tt,aH as $t,b7 as Et,b8 as zt}from"./index-6bedc73c.js";const Ke={to:[String,Object],url:String,replace:Boolean};function Rt({to:e,url:o,replace:r,$router:a}){e&&a?a[r?"replace":"push"](e):o&&(r?location.replace(o):location.href=o)}function Je(){const e=Be().proxy;return()=>Rt(e)}const[Ot,ge]=ie("button"),Bt=ze({},Ke,{tag:H("button"),text:String,icon:String,type:H("default"),size:H("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:H("button"),loadingSize:V,loadingText:String,loadingType:String,iconPosition:H("left")});var Lt=le({name:Ot,props:Bt,emits:["click"],setup(e,{emit:o,slots:r}){const a=Je(),i=()=>r.loading?r.loading():d(We,{size:e.loadingSize,type:e.loadingType,class:ge("loading")},null),n=()=>{if(e.loading)return i();if(r.icon)return d("div",{class:ge("icon")},[r.icon()]);if(e.icon)return d(ne,{name:e.icon,class:ge("icon"),classPrefix:e.iconPrefix},null)},C=()=>{let s;if(e.loading?s=e.loadingText:s=r.default?r.default():e.text,s)return d("span",{class:ge("text")},[s])},x=()=>{const{color:s,plain:l}=e;if(s){const g={color:l?s:"white"};return l||(g.background=s),s.includes("gradient")?g.border=0:g.borderColor=s,g}},f=s=>{e.loading?oe(s):e.disabled||(o("click",s),a())};return()=>{const{tag:s,type:l,size:g,block:S,round:$,plain:O,square:R,loading:v,disabled:T,hairline:L,nativeType:w,iconPosition:B}=e,P=[ge([l,g,{plain:O,block:S,round:$,square:R,loading:v,disabled:T,hairline:L}]),{[at]:L}];return d(s,{type:w,class:P,style:x(),disabled:T,onClick:f},{default:()=>[d("div",{class:ge("content")},[B==="left"&&n(),C(),B==="right"&&n()])]})}}});const ma=de(Lt);let _t=0;function Mt(){const e=Be(),{name:o="unknown"}=(e==null?void 0:e.type)||{};return`${o}-${++_t}`}const[Ge,$e]=ie("swipe"),At={loop:Z,width:V,height:V,vertical:Boolean,autoplay:ae(0),duration:ae(500),touchable:Z,lazyRender:Boolean,initialSwipe:ae(0),indicatorColor:String,showIndicators:Z,stopPropagation:Z},Qe=Symbol(Ge);var Dt=le({name:Ge,props:At,emits:["change","dragStart","dragEnd"],setup(e,{emit:o,slots:r}){const a=N(),i=N(),n=xe({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let C=!1;const x=Ze(),{children:f,linkChildren:s}=nt(Qe),l=z(()=>f.length),g=z(()=>n[e.vertical?"height":"width"]),S=z(()=>e.vertical?x.deltaY.value:x.deltaX.value),$=z(()=>n.rect?(e.vertical?n.rect.height:n.rect.width)-g.value*l.value:0),O=z(()=>g.value?Math.ceil(Math.abs($.value)/g.value):l.value),R=z(()=>l.value*g.value),v=z(()=>(n.active+l.value)%l.value),T=z(()=>{const u=e.vertical?"vertical":"horizontal";return x.direction.value===u}),L=z(()=>{const u={transitionDuration:`${n.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+n.offset.toFixed(2)}px)`};if(g.value){const I=e.vertical?"height":"width",k=e.vertical?"width":"height";u[I]=`${R.value}px`,u[k]=e[k]?`${e[k]}px`:""}return u}),w=u=>{const{active:I}=n;return u?e.loop?G(I+u,-1,l.value):G(I+u,0,O.value):I},B=(u,I=0)=>{let k=u*g.value;e.loop||(k=Math.min(k,-$.value));let X=I-k;return e.loop||(X=G(X,$.value,0)),X},P=({pace:u=0,offset:I=0,emitChange:k})=>{if(l.value<=1)return;const{active:X}=n,D=w(u),ue=B(D,I);if(e.loop){if(f[0]&&ue!==$.value){const t=ue<$.value;f[0].setOffset(t?R.value:0)}if(f[l.value-1]&&ue!==0){const t=ue>0;f[l.value-1].setOffset(t?-R.value:0)}}n.active=D,n.offset=ue,k&&D!==X&&o("change",v.value)},Y=()=>{n.swiping=!0,n.active<=-1?P({pace:l.value}):n.active>=l.value&&P({pace:-l.value})},re=()=>{Y(),x.reset(),ke(()=>{n.swiping=!1,P({pace:-1,emitChange:!0})})},j=()=>{Y(),x.reset(),ke(()=>{n.swiping=!1,P({pace:1,emitChange:!0})})};let fe;const p=()=>clearTimeout(fe),U=()=>{p(),+e.autoplay>0&&l.value>1&&(fe=setTimeout(()=>{j(),U()},+e.autoplay))},J=(u=+e.initialSwipe)=>{if(!a.value)return;const I=()=>{var k,X;if(!Me(a)){const D={width:a.value.offsetWidth,height:a.value.offsetHeight};n.rect=D,n.width=+((k=e.width)!=null?k:D.width),n.height=+((X=e.height)!=null?X:D.height)}l.value&&(u=Math.min(l.value-1,u),u===-1&&(u=l.value-1)),n.active=u,n.swiping=!0,n.offset=B(u),f.forEach(D=>{D.setOffset(0)}),U()};Me(a)?te().then(I):I()},se=()=>J(n.active);let ce;const ve=u=>{!e.touchable||u.touches.length>1||(x.start(u),C=!1,ce=Date.now(),p(),Y())},c=u=>{e.touchable&&n.swiping&&(x.move(u),T.value&&(!e.loop&&(n.active===0&&S.value>0||n.active===l.value-1&&S.value<0)||(oe(u,e.stopPropagation),P({offset:S.value}),C||(o("dragStart",{index:v.value}),C=!0))))},m=()=>{if(!e.touchable||!n.swiping)return;const u=Date.now()-ce,I=S.value/u;if((Math.abs(I)>.25||Math.abs(S.value)>g.value/2)&&T.value){const X=e.vertical?x.offsetY.value:x.offsetX.value;let D=0;e.loop?D=X>0?S.value>0?-1:1:0:D=-Math[S.value>0?"ceil":"floor"](S.value/g.value),P({pace:D,emitChange:!0})}else S.value&&P({pace:0});C=!1,n.swiping=!1,o("dragEnd",{index:v.value}),U()},y=(u,I={})=>{Y(),x.reset(),ke(()=>{let k;e.loop&&u===l.value?k=n.active===0?0:u:k=u%l.value,I.immediate?ke(()=>{n.swiping=!1}):n.swiping=!1,P({pace:k-n.active,emitChange:!0})})},_=(u,I)=>{const k=I===v.value,X=k?{backgroundColor:e.indicatorColor}:void 0;return d("i",{style:X,class:$e("indicator",{active:k})},null)},A=()=>{if(r.indicator)return r.indicator({active:v.value,total:l.value});if(e.showIndicators&&l.value>1)return d("div",{class:$e("indicators",{vertical:e.vertical})},[Array(l.value).fill("").map(_)])};return Ce({prev:re,next:j,state:n,resize:se,swipeTo:y}),s({size:g,props:e,count:l,activeIndicator:v}),q(()=>e.initialSwipe,u=>J(+u)),q(l,()=>J(n.active)),q(()=>e.autoplay,U),q([He,Ne,()=>e.width,()=>e.height],se),q(ot(),u=>{u==="visible"?U():p()}),Ie(J),it(()=>J(n.active)),lt(()=>J(n.active)),rt(p),qe(p),Le("touchmove",c,{target:i}),()=>{var u;return d("div",{ref:a,class:$e()},[d("div",{ref:i,style:L.value,class:$e("track",{vertical:e.vertical}),onTouchstartPassive:ve,onTouchend:m,onTouchcancel:m},[(u=r.default)==null?void 0:u.call(r)]),A()])}}});const Vt=de(Dt),[Yt,Xt]=ie("swipe-item");var Wt=le({name:Yt,setup(e,{slots:o}){let r;const a=xe({offset:0,inited:!1,mounted:!1}),{parent:i,index:n}=Fe(Qe);if(!i)return;const C=z(()=>{const s={},{vertical:l}=i.props;return i.size.value&&(s[l?"height":"width"]=`${i.size.value}px`),a.offset&&(s.transform=`translate${l?"Y":"X"}(${a.offset}px)`),s}),x=z(()=>{const{loop:s,lazyRender:l}=i.props;if(!l||r)return!0;if(!a.mounted)return!1;const g=i.activeIndicator.value,S=i.count.value-1,$=g===0&&s?S:g-1,O=g===S&&s?0:g+1;return r=n.value===g||n.value===$||n.value===O,r}),f=s=>{a.offset=s};return Ie(()=>{te(()=>{a.mounted=!0})}),Ce({setOffset:f}),()=>{var s;return d("div",{class:Xt(),style:C.value},[x.value?(s=o.default)==null?void 0:s.call(o):null])}}});const Zt=de(Wt),[Ht,me]=ie("cell"),pe={tag:H("div"),icon:String,size:String,title:V,value:V,label:V,center:Boolean,isLink:Boolean,border:Z,iconPrefix:String,valueClass:ye,labelClass:ye,titleClass:ye,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},Nt=ze({},pe,Ke);var qt=le({name:Ht,props:Nt,setup(e,{slots:o}){const r=Je(),a=()=>{if(o.label||Q(e.label))return d("div",{class:[me("label"),e.labelClass]},[o.label?o.label():e.label])},i=()=>{var f;if(o.title||Q(e.title)){const s=(f=o.title)==null?void 0:f.call(o);return Array.isArray(s)&&s.length===0?void 0:d("div",{class:[me("title"),e.titleClass],style:e.titleStyle},[s||d("span",null,[e.title]),a()])}},n=()=>{const f=o.value||o.default;if(f||Q(e.value))return d("div",{class:[me("value"),e.valueClass]},[f?f():d("span",null,[e.value])])},C=()=>{if(o.icon)return o.icon();if(e.icon)return d(ne,{name:e.icon,class:me("left-icon"),classPrefix:e.iconPrefix},null)},x=()=>{if(o["right-icon"])return o["right-icon"]();if(e.isLink){const f=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return d(ne,{name:f,class:me("right-icon")},null)}};return()=>{var f;const{tag:s,size:l,center:g,border:S,isLink:$,required:O}=e,R=(f=e.clickable)!=null?f:$,v={center:g,required:!!O,clickable:R,borderless:!S};return l&&(v[l]=!!l),d(s,{class:me(v),role:R?"button":void 0,tabindex:R?0:void 0,onClick:r},{default:()=>{var T;return[C(),i(),n(),x(),(T=o.extra)==null?void 0:T.call(o)]}})}}});const Ft=de(qt);function et(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function jt(e,o){if(et(e)){if(o.required)return!1;if(o.validateEmpty===!1)return!0}return!(o.pattern&&!o.pattern.test(String(e)))}function Ut(e,o){return new Promise(r=>{const a=o.validator(e,o);if(ut(a)){a.then(r);return}r(a)})}function De(e,o){const{message:r}=o;return dt(r)?r(e,o):r||""}function Kt({target:e}){e.composing=!0}function Ve({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Jt(e,o){const r=st();e.style.height="auto";let a=e.scrollHeight;if(ft(o)){const{maxHeight:i,minHeight:n}=o;i!==void 0&&(a=Math.min(a,i)),n!==void 0&&(a=Math.max(a,n))}a&&(e.style.height=`${a}px`,ct(r))}function Gt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function ee(e){return[...e].length}function Re(e,o){return[...e].slice(0,o).join("")}const[Qt,F]=ie("field"),pt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:V,formatter:Function,clearIcon:H("clear"),modelValue:ae(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:H("focus"),formatTrigger:H("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},ea=ze({},pe,pt,{rows:V,type:H("text"),rules:Array,autosize:[Boolean,Object],labelWidth:V,labelClass:ye,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var ta=le({name:Qt,props:ea,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:o,slots:r}){const a=Mt(),i=xe({status:"unvalidated",focused:!1,validateMessage:""}),n=N(),C=N(),x=N(),{parent:f}=Fe(mt),s=()=>{var t;return String((t=e.modelValue)!=null?t:"")},l=t=>{if(Q(e[t]))return e[t];if(f&&Q(f.props[t]))return f.props[t]},g=z(()=>{const t=l("readonly");if(e.clearable&&!t){const h=s()!=="",b=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return h&&b}return!1}),S=z(()=>x.value&&r.input?x.value():e.modelValue),$=z(()=>{var t;const h=l("required");return h==="auto"?(t=e.rules)==null?void 0:t.some(b=>b.required):h}),O=t=>t.reduce((h,b)=>h.then(()=>{if(i.status==="failed")return;let{value:E}=S;if(b.formatter&&(E=b.formatter(E,b)),!jt(E,b)){i.status="failed",i.validateMessage=De(E,b);return}if(b.validator)return et(E)&&b.validateEmpty===!1?void 0:Ut(E,b).then(M=>{M&&typeof M=="string"?(i.status="failed",i.validateMessage=M):M===!1&&(i.status="failed",i.validateMessage=De(E,b))})}),Promise.resolve()),R=()=>{i.status="unvalidated",i.validateMessage=""},v=()=>o("endValidate",{status:i.status,message:i.validateMessage}),T=(t=e.rules)=>new Promise(h=>{R(),t?(o("startValidate"),O(t).then(()=>{i.status==="failed"?(h({name:e.name,message:i.validateMessage}),v()):(i.status="passed",h(),v())})):h()}),L=t=>{if(f&&e.rules){const{validateTrigger:h}=f.props,b=Ae(h).includes(t),E=e.rules.filter(M=>M.trigger?Ae(M.trigger).includes(t):b);E.length&&T(E)}},w=t=>{var h;const{maxlength:b}=e;if(Q(b)&&ee(t)>+b){const E=s();if(E&&ee(E)===+b)return E;const M=(h=n.value)==null?void 0:h.selectionEnd;if(i.focused&&M){const W=[...t],K=W.length-+b;return W.splice(M-K,K),W.join("")}return Re(t,+b)}return t},B=(t,h="onChange")=>{const b=t;t=w(t);const E=ee(b)-ee(t);if(e.type==="number"||e.type==="digit"){const W=e.type==="number";t=ht(t,W,W)}let M=0;if(e.formatter&&h===e.formatTrigger){const{formatter:W,maxlength:K}=e;if(t=W(t),Q(K)&&ee(t)>+K&&(t=Re(t,+K)),n.value&&i.focused){const{selectionEnd:Pe}=n.value,_e=Re(b,Pe);M=ee(W(_e))-ee(_e)}}if(n.value&&n.value.value!==t)if(i.focused){let{selectionStart:W,selectionEnd:K}=n.value;if(n.value.value=t,Q(W)&&Q(K)){const Pe=ee(t);E?(W-=E,K-=E):M&&(W+=M,K+=M),n.value.setSelectionRange(Math.min(W,Pe),Math.min(K,Pe))}}else n.value.value=t;t!==e.modelValue&&o("update:modelValue",t)},P=t=>{t.target.composing||B(t.target.value)},Y=()=>{var t;return(t=n.value)==null?void 0:t.blur()},re=()=>{var t;return(t=n.value)==null?void 0:t.focus()},j=()=>{const t=n.value;e.type==="textarea"&&e.autosize&&t&&Jt(t,e.autosize)},fe=t=>{i.focused=!0,o("focus",t),te(j),l("readonly")&&Y()},p=t=>{i.focused=!1,B(s(),"onBlur"),o("blur",t),!l("readonly")&&(L("onBlur"),te(j),yt())},U=t=>o("clickInput",t),J=t=>o("clickLeftIcon",t),se=t=>o("clickRightIcon",t),ce=t=>{oe(t),o("update:modelValue",""),o("clear",t)},ve=z(()=>{if(typeof e.error=="boolean")return e.error;if(f&&f.props.showError&&i.status==="failed")return!0}),c=z(()=>{const t=l("labelWidth"),h=l("labelAlign");if(t&&h!=="top")return{width:we(t)}}),m=t=>{t.keyCode===13&&(!(f&&f.props.submitOnEnter)&&e.type!=="textarea"&&oe(t),e.type==="search"&&Y()),o("keypress",t)},y=()=>e.id||`${a}-input`,_=()=>i.status,A=()=>{const t=F("control",[l("inputAlign"),{error:ve.value,custom:!!r.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(r.input)return d("div",{class:t,onClick:U},[r.input()]);const h={id:y(),ref:n,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:l("disabled"),readonly:l("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${a}-label`:void 0,onBlur:p,onFocus:fe,onInput:P,onClick:U,onChange:Ve,onKeypress:m,onCompositionend:Ve,onCompositionstart:Kt};return e.type==="textarea"?d("textarea",h,null):d("input",Se(Gt(e.type),h),null)},u=()=>{const t=r["left-icon"];if(e.leftIcon||t)return d("div",{class:F("left-icon"),onClick:J},[t?t():d(ne,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},I=()=>{const t=r["right-icon"];if(e.rightIcon||t)return d("div",{class:F("right-icon"),onClick:se},[t?t():d(ne,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},k=()=>{if(e.showWordLimit&&e.maxlength){const t=ee(s());return d("div",{class:F("word-limit")},[d("span",{class:F("word-num")},[t]),bt("/"),e.maxlength])}},X=()=>{if(f&&f.props.showErrorMessage===!1)return;const t=e.errorMessage||i.validateMessage;if(t){const h=r["error-message"],b=l("errorMessageAlign");return d("div",{class:F("error-message",b)},[h?h({message:t}):t])}},D=()=>{const t=l("labelWidth"),h=l("labelAlign"),b=l("colon")?":":"";if(r.label)return[r.label(),b];if(e.label)return d("label",{id:`${a}-label`,for:r.input?void 0:y(),onClick:E=>{oe(E),re()},style:h==="top"&&t?{width:we(t)}:void 0},[e.label+b])},ue=()=>[d("div",{class:F("body")},[A(),g.value&&d(ne,{ref:C,name:e.clearIcon,class:F("clear")},null),I(),r.button&&d("div",{class:F("button")},[r.button()])]),k(),X()];return Ce({blur:Y,focus:re,validate:T,formValue:S,resetValidation:R,getValidationStatus:_}),vt(gt,{customValue:x,resetValidation:R,validateWithTrigger:L}),q(()=>e.modelValue,()=>{B(s()),R(),L("onChange"),te(j)}),Ie(()=>{B(s(),e.formatTrigger),te(j)}),Le("touchstart",ce,{target:z(()=>{var t;return(t=C.value)==null?void 0:t.$el})}),()=>{const t=l("disabled"),h=l("labelAlign"),b=u(),E=()=>{const M=D();return h==="top"?[b,M].filter(Boolean):M||[]};return d(Ft,{size:e.size,class:F({error:ve.value,disabled:t,[`label-${h}`]:h}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:c.value,valueClass:F("value"),titleClass:[F("label",[h,{required:$.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:b&&h!=="top"?()=>b:null,title:E,value:ue,extra:r.extra})}}});const ha=de(ta),[aa,he]=ie("image"),na={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:V,height:V,radius:V,lazyLoad:Boolean,iconSize:V,showError:Z,errorIcon:H("photo-fail"),iconPrefix:String,showLoading:Z,loadingIcon:H("photo"),crossorigin:String,referrerpolicy:String};var oa=le({name:aa,props:na,emits:["load","error"],setup(e,{emit:o,slots:r}){const a=N(!1),i=N(!0),n=N(),{$Lazyload:C}=Be().proxy,x=z(()=>{const v={width:we(e.width),height:we(e.height)};return Q(e.radius)&&(v.overflow="hidden",v.borderRadius=we(e.radius)),v});q(()=>e.src,()=>{a.value=!1,i.value=!0});const f=v=>{i.value&&(i.value=!1,o("load",v))},s=()=>{const v=new Event("load");Object.defineProperty(v,"target",{value:n.value,enumerable:!0}),f(v)},l=v=>{a.value=!0,i.value=!1,o("error",v)},g=(v,T,L)=>L?L():d(ne,{name:v,size:e.iconSize,class:T,classPrefix:e.iconPrefix},null),S=()=>{if(i.value&&e.showLoading)return d("div",{class:he("loading")},[g(e.loadingIcon,he("loading-icon"),r.loading)]);if(a.value&&e.showError)return d("div",{class:he("error")},[g(e.errorIcon,he("error-icon"),r.error)])},$=()=>{if(a.value||!e.src)return;const v={alt:e.alt,class:he("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?wt(d("img",Se({ref:n},v),null),[[St("lazy"),e.src]]):d("img",Se({ref:n,src:e.src,onLoad:f,onError:l},v),null)},O=({el:v})=>{const T=()=>{v===n.value&&i.value&&s()};n.value?T():te(T)},R=({el:v})=>{v===n.value&&!a.value&&l()};return C&&je&&(C.$on("loaded",O),C.$on("error",R),qe(()=>{C.$off("loaded",O),C.$off("error",R)})),Ie(()=>{te(()=>{var v;(v=n.value)!=null&&v.complete&&!e.lazyLoad&&s()})}),()=>{var v;return d("div",{class:he({round:e.round,block:e.block}),style:x.value},[$(),S(),(v=r.default)==null?void 0:v.call(r)])}}});const ia=de(oa),Ye=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),la=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),Oe=ie("image-preview")[1],Xe=2.6,ra={src:String,show:Boolean,active:Number,minZoom:Te(V),maxZoom:Te(V),rootWidth:Te(Number),rootHeight:Te(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean};var sa=le({props:ra,emits:["scale","close","longPress"],setup(e,{emit:o,slots:r}){const a=xe({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),i=Ze(),n=N(),C=N(),x=N(!1),f=N(!1);let s=0;const l=z(()=>{const{scale:c,moveX:m,moveY:y,moving:_,zooming:A,initializing:u}=a,I={transitionDuration:A||_||u?"0s":".3s"};return(c!==1||f.value)&&(I.transform=`matrix(${c}, 0, 0, ${c}, ${m}, ${y})`),I}),g=z(()=>{if(a.imageRatio){const{rootWidth:c,rootHeight:m}=e,y=x.value?m/a.imageRatio:c;return Math.max(0,(a.scale*y-c)/2)}return 0}),S=z(()=>{if(a.imageRatio){const{rootWidth:c,rootHeight:m}=e,y=x.value?m:c*a.imageRatio;return Math.max(0,(a.scale*y-m)/2)}return 0}),$=(c,m)=>{var y;if(c=G(c,+e.minZoom,+e.maxZoom+1),c!==a.scale){const _=c/a.scale;if(a.scale=c,m){const A=Ue((y=n.value)==null?void 0:y.$el),u={x:A.width*.5,y:A.height*.5},I=a.moveX-(m.x-A.left-u.x)*(_-1),k=a.moveY-(m.y-A.top-u.y)*(_-1);a.moveX=G(I,-g.value,g.value),a.moveY=G(k,-S.value,S.value)}else a.moveX=0,a.moveY=f.value?s:0;o("scale",{scale:c,index:e.active})}},O=()=>{$(1)},R=()=>{const c=a.scale>1?1:2;$(c,c===2||f.value?{x:i.startX.value,y:i.startY.value}:void 0)};let v,T,L,w,B,P,Y,re,j=!1;const fe=c=>{const{touches:m}=c;if(v=m.length,v===2&&e.disableZoom)return;const{offsetX:y}=i;i.start(c),T=a.moveX,L=a.moveY,re=Date.now(),j=!1,a.moving=v===1&&(a.scale!==1||f.value),a.zooming=v===2&&!y.value,a.zooming&&(w=a.scale,B=Ye(m))},p=c=>{const{touches:m}=c;if(i.move(c),a.moving){const{deltaX:y,deltaY:_}=i,A=y.value+T,u=_.value+L;if((A>g.value||A<-g.value)&&!j&&i.isHorizontal()){a.moving=!1;return}j=!0,oe(c,!0),a.moveX=G(A,-g.value,g.value),a.moveY=G(u,-S.value,S.value)}if(a.zooming&&(oe(c,!0),m.length===2)){const y=Ye(m),_=w*y/B;P=la(m),$(_,P)}},U=c=>{var m;const y=(m=C.value)==null?void 0:m.$el,_=y.firstElementChild,A=c.target===y,u=_==null?void 0:_.contains(c.target);!e.closeOnClickImage&&u||!e.closeOnClickOverlay&&A||o("close")},J=c=>{if(v>1)return;const m=Date.now()-re,y=250;i.isTap.value&&(m<y?e.doubleScale?Y?(clearTimeout(Y),Y=null,R()):Y=setTimeout(()=>{U(c),Y=null},y):U(c):m>Ct&&o("longPress"))},se=c=>{let m=!1;if((a.moving||a.zooming)&&(m=!0,a.moving&&T===a.moveX&&L===a.moveY&&(m=!1),!c.touches.length)){a.zooming&&(a.moveX=G(a.moveX,-g.value,g.value),a.moveY=G(a.moveY,-S.value,S.value),a.zooming=!1),a.moving=!1,T=0,L=0,w=1,a.scale<1&&O();const y=+e.maxZoom;a.scale>y&&$(y,P)}oe(c,m),J(c),i.reset()},ce=()=>{const{rootWidth:c,rootHeight:m}=e,y=m/c,{imageRatio:_}=a;x.value=a.imageRatio>y&&_<Xe,f.value=a.imageRatio>y&&_>=Xe,f.value&&(s=(_*c-m)/2,a.moveY=s,a.initializing=!0,xt(()=>{a.initializing=!1})),O()},ve=c=>{const{naturalWidth:m,naturalHeight:y}=c.target;a.imageRatio=y/m,ce()};return q(()=>e.active,O),q(()=>e.show,c=>{c||O()}),q(()=>[e.rootWidth,e.rootHeight],ce),Le("touchmove",p,{target:z(()=>{var c;return(c=C.value)==null?void 0:c.$el})}),Ce({resetScale:O}),()=>{const c={loading:()=>d(We,{type:"spinner"},null)};return d(Zt,{ref:C,class:Oe("swipe-item"),onTouchstartPassive:fe,onTouchend:se,onTouchcancel:se},{default:()=>[r.image?d("div",{class:Oe("image-wrap")},[r.image({src:e.src})]):d(ia,{ref:n,src:e.src,fit:"contain",class:Oe("image",{vertical:x.value}),style:l.value,onLoad:ve},c)]})}}});const[ca,be]=ie("image-preview"),ua=["show","teleport","transition","overlayStyle","closeOnPopstate"],da={show:Boolean,loop:Z,images:kt(),minZoom:ae(1/3),maxZoom:ae(3),overlay:Z,closeable:Boolean,showIndex:Z,className:ye,closeIcon:H("clear"),transition:String,beforeClose:Function,doubleScale:Z,overlayClass:ye,overlayStyle:Object,swipeDuration:ae(300),startPosition:ae(0),showIndicators:Boolean,closeOnPopstate:Z,closeOnClickImage:Z,closeOnClickOverlay:Z,closeIconPosition:H("top-right"),teleport:[String,Object]};var tt=le({name:ca,props:da,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:o,slots:r}){const a=N(),i=N(),n=xe({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),C=()=>{if(a.value){const w=Ue(a.value.$el);n.rootWidth=w.width,n.rootHeight=w.height,a.value.resize()}},x=w=>o("scale",w),f=w=>o("update:show",w),s=()=>{$t(e.beforeClose,{args:[n.active],done:()=>f(!1)})},l=w=>{w!==n.active&&(n.active=w,o("change",w))},g=()=>{if(e.showIndex)return d("div",{class:be("index")},[r.index?r.index({index:n.active}):`${n.active+1} / ${e.images.length}`])},S=()=>{if(r.cover)return d("div",{class:be("cover")},[r.cover()])},$=()=>{n.disableZoom=!0},O=()=>{n.disableZoom=!1},R=()=>d(Vt,{ref:a,lazyRender:!0,loop:e.loop,class:be("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:l,onDragEnd:O,onDragStart:$},{default:()=>[e.images.map((w,B)=>d(sa,{ref:P=>{B===n.active&&(i.value=P)},src:w,show:e.show,active:n.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:n.rootWidth,rootHeight:n.rootHeight,disableZoom:n.disableZoom,doubleScale:e.doubleScale,closeOnClickImage:e.closeOnClickImage,closeOnClickOverlay:e.closeOnClickOverlay,onScale:x,onClose:s,onLongPress:()=>o("longPress",{index:B})},{image:r.image}))]}),v=()=>{if(e.closeable)return d(ne,{role:"button",name:e.closeIcon,class:[be("close-icon",e.closeIconPosition),Tt],onClick:s},null)},T=()=>o("closed"),L=(w,B)=>{var P;return(P=a.value)==null?void 0:P.swipeTo(w,B)};return Ce({resetScale:()=>{var w;(w=i.value)==null||w.resetScale()},swipeTo:L}),Ie(C),q([He,Ne],C),q(()=>e.startPosition,w=>l(+w)),q(()=>e.show,w=>{const{images:B,startPosition:P}=e;w?(l(+P),te(()=>{C(),L(+P,{immediate:!0})})):o("close",{index:n.active,url:B[n.active]})}),()=>d(Pt,Se({class:[be(),e.className],overlayClass:[be("overlay"),e.overlayClass],onClosed:T,"onUpdate:show":f},It(e,ua)),{default:()=>[v(),R(),g(),S()]})}});let Ee;const fa={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function va(){({instance:Ee}=Et({setup(){const{state:e,toggle:o}=zt(),r=()=>{e.images=[]};return()=>d(tt,Se(e,{onClosed:r,"onUpdate:show":o}),null)}}))}const ba=(e,o=0)=>{if(je)return Ee||va(),e=Array.isArray(e)?{images:e,startPosition:o}:e,Ee.open(ze({},fa,e)),Ee};de(tt);const ya=(e,o)=>{const r=e.__vccOpts||e;for(const[a,i]of o)r[a]=i;return r};export{ma as B,Ft as C,ha as F,ia as I,Vt as S,ya as _,Ke as a,Zt as b,Rt as r,ba as s,Mt as u};
